# Copyright 2024 Dell Inc. or its subsidiaries. All Rights Reserved.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

---
k8s_compatible_tag: "{{ hostvars['localhost']['k8s_to_kubespray_comp_ver']['compatible_tags'].keys() | list }}"
# The source of the supported k8s versions is kubespray/roles/kubespray_defaults/vars/main.yml in the Kubespray repository.
supported_k8s_version:
  "v2.26.0": [v1.30.4, v1.28.0]
  "v2.27.0": [v1.31.4, v1.29.0]
  "v2.28.0": [1.32.5, 1.30.0]
omnia_kubespray_latest_ver_msg: "Latest omnia_kubespray tag is: {{ kubespray_latest_tag.split(':')[1] }}"
k8s_compatibility_message: "k8s {{ k8s_compatible_tag }} is compatible with existing {{ kube_version }}"
kubespray_incompatible_msg: |
  "An existing kubespray image is not compatible with provided Kubernetes version.
  1) Rebuild the kubespray image with {{ kube_version }} using build_image.sh
     Command: ./build_images.sh kubespray kubespray_version={{ kube_version }}
  2) Update software_config.json with a suggested supported version: {{ k8s_to_kubespray_latest }}
  Then re-run prepare_oim.yml."
